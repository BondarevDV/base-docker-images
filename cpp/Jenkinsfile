properties([
        parameters([
        string(name: 'DOCKER_IMAGE_BRANCH', defaultValue: '0.0.1', description: 'Enter tag for image'),
        string(name: 'DOCKERFILE_NAME', defaultValue: 'cpp/Dockerfile.OTUS', description: 'Enter path for Dockerfile  for image')
    ])
])

pipeline {
    agent any

    stages{
        stage("Prepare build image") {
            steps {
                sh "docker build -f ${DOCKERFILE_NAME} . -t project-build:${DOCKER_IMAGE_BRANCH}"
            }
        }
    }
}

